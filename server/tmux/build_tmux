build_tmux_func(){
if [ -z $1 ];then
echo "input install path"
exit
fi
mkdir -pv $1
# buildPath is fixed, install is defined by user
buildPath=$HOME/del_build
mkdir -pv $buildPath
echo $buildPath
cd $buildPath
# it's used to build , not for development , so use https instead of git protocol
git clone -b R1 https://github.com/foresthz/tmux.git
git clone -b R1 https://github.com/foresthz/libevent
cd libevent
./autogen.sh
./configure --prefix=$1
make
make install

echo "build tmux"
cd $buildPath/tmux
./autogen.sh
./configure CFLAGS=-I$1/include LDFLAGS=-L$1/lib --prefix=$1
make
make install
if [ $? = 0 ];then
  echo "success!";
  echo "now you should specify export LD_LIBRARY_PATH=`echo $1`:$LD_LIBRARY_PATH"
else
  echo "failed";
fi
}

time build_tmux_func $1
